//***############################################****
//   CRON CONFIGURATION TASK
//   Load IT tables & FT tables
//   IN, MSC, P2P, OM, ZEBRA
//***############################################****

BATCH_SCRIPT_LAUNCHER = "/usr/hdp/current/spark2-client/bin/spark-submit"
STREAMING_SCRIPT_LAUNCHER = "/usr/hdp/current/spark2-client/bin/spark-submit"
SH_SCRIPT_LAUNCHER = "/bin/sh"
HIVE_SCRIPT_LAUNCHER = "/bin/sh"
PIG_SCRIPT_LAUNCHER = "/bin/sh"
SQOOP_LAUNCHER="/bin/sh"

env = "prod"

cronmanagerId = "002"

//--###**************************************#####---
//--###        CHARGEMENT FT IN
//--###**************************************#####---

// Chargement FT IN ZTE VOICE_SMS
crontasks +=
  {
    instanceId = "LOAD_FT_VOICE_SMS",
    cron = "0 0 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-voice-sms.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT IN ZTE VOICE_SMS_POST
crontasks +=
  {
    instanceId = "LOAD_FT_VOICE_SMS_POST",
    cron = "0 2 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-voice-sms-post.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT IN ZTE SUBCRIPTION
crontasks +=
  {
    instanceId = "LOAD_FT_SUBSCRIPTION",
    cron = "0 4 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-subscription.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT_A IN ZTE SUBCRIPTION
// crontasks +=
//  {
//    instanceId = "LOAD_FT_A_SUBSCRIPTION",
//    cron = "55 15 */1 * * ?",
//    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-a-subscription.conf",
//    taskType = "HIVE"
//    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
//    timeout = "30 minutes"
//    extraTaskParams : [
//      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
//      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
//    ]
//  }

// Chargement FT IN ZTE RECHARGE
crontasks +=
  {
    instanceId = "LOAD_FT_RECHARGE",
    cron = "0 6 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-recharge.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT IN ZTE OVERDRAFT
crontasks +=
  {
    instanceId = "LOAD_FT_OVERDRAFT",
    cron = "0 8 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-overdraft.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT IN ZTE EMERGENCY DATA
crontasks +=
  {
    instanceId = "LOAD_FT_EMERGENCY_DATA",
    cron = "0 10 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-emergency-data.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "30 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT IN ZTE DATA
crontasks +=
  {
    instanceId = "LOAD_FT_DATA",
    cron = "0 12 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-data.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT_A IN ZTE GPRS ACTIVITY
//crontasks +=
//  {
//    instanceId = "LOAD_FT_A_GPRS_ACTIVITY",
//    cron = "0 35 */1 * * ?",
//    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-a-gprs-activity.conf",
//    taskType = "HIVE"
//    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
//    timeout = "30 minutes"
//    extraTaskParams : [
//      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
//      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
//    ]
//  }

// Chargement FT IN ZTE DATA_TRANSFER
crontasks +=
  {
    instanceId = "LOAD_FT_DATA_TRANSFER",
    cron = "0 14 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-data-transfer.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "45 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT_A IN ZTE DATA_TRANSFER
//crontasks +=
//  {
//    instanceId = "LOAD_FT_A_DATA_TRANSFER",
//    cron = "0 35 */1 * * ?",
//    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-a-data-transfer.conf",
//    taskType = "HIVE"
//    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
//    timeout = "50 minutes"
//    extraTaskParams : [
//      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
//      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
//    ]
//  }

// Chargement FT IN ZTE CREDIT_TRANSFER
crontasks +=
  {
    instanceId = "LOAD_FT_CREDIT_TRANSFER",
    cron = "0 16 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-credit-transfer.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "30 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT IN ZTE DATA POST
crontasks +=
  {
    instanceId = "LOAD_FT_CRA_GPRS_POST",
    cron = "0 18 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-cra-gprs-post.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement FT_A IN ZTE GPRS ACTIVITY POST
//crontasks +=
//  {
//    instanceId = "LOAD_FT_A_GPRS_ACTIVITY_POST",
//    cron = "0 50 */1 * * ?",
//    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-a-gprs-activity-post.conf",
//    taskType = "HIVE"
//    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
//    timeout = "50 minutes"
//    extraTaskParams : [
//      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
//      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
//    ]
//  }

// Chargement FT IN ZTE CONTRACT_SNAPSHOT
crontasks +=
  {
    instanceId = "LOAD_FT_CONTRACT_SNAPSHOT",
    cron = "0 20 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-ft-contract-snapshot.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement KPI_ADJUSTMENT
crontasks +=
  {
    instanceId = "LOAD_KPI_ADJUSTMENT",
    cron = "0 22 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/FT/load-kpi-adjustement.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

//--###**************************************#####---
//--###        CALCULS OM
//--###**************************************#####---

// Calcul KPI OM TRANSACTIONS
//crontasks +=
//  {
//    instanceId = "LOAD_KPI_OM_TRANSACTIONS",
//    cron = "0 5 */1 * * ?",
//    configFile = "/PROD/CONF/OM/load-kpi-om-transactions.conf",
//    taskType = "HIVE"
//    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
//    timeout = "65 minutes"
//    extraTaskParams : [
//      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
//      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
//    ]
//  }

//--###**************************************#####---
//--###        CHARGEMENT & CALCULS MSC
//--###**************************************#####---
// Chargement de FT AG INTERCO
crontasks +=
  {
    instanceId = "LOAD_FT_AG_INTERCO",
    cron = "0 24 */1 * * ?",
    configFile = "/PROD/CONF/MSC/load-ft-ag-interco.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement de FT MSC TRANSACTION
crontasks +=
  {
    instanceId = "LOAD_FT_MSC_TRANSACTION",
    cron = "0 26 */1 * * ?",
    configFile = "/PROD/CONF/MSC/load-ft-msc-transaction.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement de FT X INTERCO
crontasks +=
  {
    instanceId = "LOAD_FT_X_INTERCO_FINAL",
    cron = "0 28 */1 * * ?",
    configFile = "/PROD/CONF/MSC/load-ft-x-interco-final.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

////--###**************************************#####---
////--###        CHARGEMENT FT ZEBRA
////--###**************************************#####---
// Chargement de ZEBRA FT REFILL
crontasks +=
  {
    instanceId = "LOAD_FT_REFILL",
    cron = "0 30 */1 * * ?",
    configFile = "/PROD/CONF/ZEBRA/FT/load-ft-refill.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "30 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// Chargement de ZEBRA FT SUBS RETAIL
crontasks +=
  {
    instanceId = "LOAD_FT_SUBS_RETAIL_ZEBRA",
    cron = "0 32 */1 * * ?",
    configFile = "/PROD/CONF/ZEBRA/FT/load-ft-subs-retail-zebra.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "30 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

////--###**************************************#####---
////--###        CALCUL EQUATION PREPAYEE
////--###**************************************#####---

// CALCUL FT_EDR_PRPD_EQT
crontasks +=
  {
    instanceId = "LOAD_FT_EDR_PRPD_EQT",
    cron = "0 34 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/EQUATION_PREPAYEE/load-ft-edr-prpd-eqt.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// CALCUL FT_A_EDR_PRPD_EQT
crontasks +=
  {
    instanceId = "LOAD_FT_A_EDR_PRPD_EQT",
    cron = "0 36 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/EQUATION_PREPAYEE/load-ft-a-edr-prpd-eqt.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// CALCUL FT_PRPD_EQT
crontasks +=
  {
    instanceId = "LOAD_FT_PRPD_EQT",
    cron = "0 38 */1 * * ?",
    configFile = "/PROD/CONF/IN_ZTE/EQUATION_PREPAYEE/load-ft-prpd-eqt.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "65 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// MONITORING

// CALCUL DES FICHIERS MANQUANTS IN
crontasks +=
  {
    instanceId = "COMPUTE_IN_ZTE_MISSING_FILES",
    cron = "0 40 */1 * * ?",
    configFile = "/PROD/CONF/MONITORING/compute_in_zte_missing_files.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "60 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }


// CALCUL DES FICHIERS MANQUANTS EXTRACT
crontasks +=
  {
    instanceId = "COMPUTE_EXTRACT_MISSING_FILES",
    cron = "0 42 */1 * * ?",
    configFile = "/PROD/CONF/MONITORING/compute_extract_missing_files.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "60 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }


// CALCUL DES FICHIERS MANQUANTS OTHERS
crontasks +=
  {
    instanceId = "COMPUTE_OTHERS_MISSING_FILES",
    cron = "0 44 */1 * * ?",
    configFile = "/PROD/CONF/MONITORING/compute_others_missing_files.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "60 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

//// CALCUL DES FICHIERS COMPUTE_FT_DAILY_STATUS
crontasks +=
  {
    instanceId = "COMPUTE_FT_DAILY_STATUS",
    cron = "0 46 */1 * * ?",
    configFile = "/PROD/CONF/MONITORING/compute_ft_daily_status.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "120 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

//// CALCUL DU REVENUE MARKETING POUR NOTIF
crontasks +=
  {
    instanceId = "COMPUTE_REVENUE_MARKETING",
    cron = "0 48 */1 * * ?",
    configFile = "/PROD/CONF/NOTIFICATION/revenu_marketing.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "30 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

//// CALCUL DU SMS USAGE
crontasks +=
  {
    instanceId = "COMPUTE_SMS_USAGE",
    cron = "0 50 */1 * * ?",
    configFile = "/PROD/CONF/NOTIFICATION/sms_usage.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "30 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// COMPUTE STATISTICS
crontasks +=
  {
    instanceId = "ANALYZE_COMPUTE_STATISTICS",
    cron = "0 52 0 */1 * ?",
    configFile = "/PROD/CONF/analyze_compute_statistics.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "60 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }



//--###**************************************#####---
//--###        CALCULS MVAS
//--###**************************************#####---
// FT MVAS
crontasks +=
  {
    instanceId = "LOAD_FT_SMSC_TRANSACTION_A2P",
    cron = "0 54 */1 * * ?",
    configFile = "/PROD/CONF/MVAS/load-ft-smsc-transaction-a2p.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "60 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

// FT A MVAS
crontasks +=
  {
    instanceId = "LOAD_FT_QOS_SPECIAL_NUMBER",
    cron = "0 56 */1 * * ?",
    configFile = "/PROD/CONF/MVAS/load-ft-qos-special-number.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "60 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }

//--###**************************************#####---
//--###        CALCULS OTARIE
//--###**************************************#####---
// FT_OTARIE_DATA_TRAFFIC_DAY
crontasks +=
  {
    instanceId = "LOAD_FT_OTARIE_DATA_TRAFFIC_DAY",
    cron = "0 58 */1 * * ?",
    configFile = "/PROD/CONF/OTARIE/FT/load-ft-otarie-data-traffic-day.conf",
    taskType = "HIVE"
    taskLauncher = ${HIVE_SCRIPT_LAUNCHER}
    timeout = "60 minutes"
    extraTaskParams : [
      {"param" : "/opt/app/cronmanager/bin/cronmanager -J-Xmx512m"}
      , {"param" : "-main cm.orange.processor.HiveScriptLauncher"}
    ]
  }
